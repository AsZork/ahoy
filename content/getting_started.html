---
title: "Getting Started"
date: 2022-11-05T21:27:10Z
tags: []
draft: false
---
<script type="module" src="https://unpkg.com/esp-web-tools@9.0.3/dist/web/install-button.js?module"></script>


<div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row align-items-center g-5 py-5">
        <div class="col-lg-6">
            <h1 class="display-5 fw-bold lh-1 mb-3">Hardware / Einkaufsliste</h1>
            <p class="lead">
                Die Hardware für AhoyDTU besteht nur aus zwei Modulen, einem WLAN-Modul und einem Funkmodul. Für die Systemstabilität wird ein Kondensator nahe am Funkmodul empfohlen.
            </p>
            <p class="lead">
                Der Gesamtpreis spiegelt wider was eine Hardware für Ahoy kosten darf. Auf gängigen Plattformen (z.B. ebay Kleinanzeigen) wird diese zu völlig überzogenen Preisen angeboten, also besser selbst zusammenbauen.
            </p>
            <div class="alert alert-secondary" role="alert">
                Die extern verlinkten Angebote sind willkürlich und dienen nur als Beispiel. Die Angebote können zwischenzeitlich ausverkauft oder entfernt worden sein.
            </div>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">Bauteil</th>
                        <th scope="col">Anzahl</th>
                        <th scope="col">Preis (ca.)</th>
                        <th scope="col">Makershop</th>
                        <th scope="col">Ebay</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div>ESP32 WROOM32</div>
                            <div class="alert alert-success" role="alert">
                                für bis zu 16 Inverter; besser für Nulleinspeisung; benötigt für HMS / HMT
                            </div>
                        </td>
                        <td>1</td>
                        <td>8,20 €</td>
                        <td><a href="https://www.makershop.de/plattformen/nodemcu/esp32-board-stiftleisten/" target="_blank">link</a></td>
                        <td><a href="https://www.ebay.de/itm/166119928274" target="_blank">link</a></td>
                    </tr>
                    <tr>
                        <td>
                            <div>Wemos D1 Mini</div>
                            <div class="alert alert-success" role="alert">
                                für bis zu 4 Inverter; Alternative zu ESP32; kostengünstiger; nur für MI und HM
                            </div></td>
                        <td>(optional)</td>
                        <td>4,40 €</td>
                        <td><a href="https://www.makershop.de/plattformen/d1-mini/wemos-d1-mini/" target="_blank">link</a></td>
                        <td><a href="https://www.ebay.de/itm/153891459582" target="_blank">link</a></td>
                    </tr>
                    <tr>
                        <td>
                            <div>NRF24L01+</div>
                            <div class="alert alert-success" role="alert">
                                für MI- und HM-Serie
                            </div>
                        </td>
                        <td>1</td>
                        <td>3,45 €</td>
                        <td><a href="https://www.makershop.de/module/funk/nrf24l01/" target="_blank">link</a></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>NRF24L01+ PA LNA SMA mit Antenne</td>
                        <td>(optional)</td>
                        <td>4,50 €</td>
                        <td><a href="https://www.makershop.de/module/funk/nrf24l01-pa-lna-sma-antenne/" target="_blank">link</a></td>
                        <td><a href="https://www.ebay.de/itm/291793085079" target="_blank">link</a></td>
                    </tr>
                    <tr>
                        <td>
                            <div>CMT2300A</div>
                            <div class="alert alert-success" role="alert">
                                für HMS- und HMT-Serie
                            </div>
                        </td>
                        <td>1</td>
                        <td>4,59 €</td>
                        <td><a href="https://www.amazon.de/Lochabstand-E49-900M20S-Fernbedienung-%C3%9Cberwachung-Medizinische/dp/B09G9GJCXW" target="_blank">Amazon</a></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Jumper Kabel</td>
                        <td>(optional)</td>
                        <td>2,05 €</td>
                        <td><a href="https://www.makershop.de/zubehoer/kabel/40p-10cm/" target="_blank">link</a></td>
                        <td><a href="https://www.ebay.de/itm/334558008501" target="_blank">link</a></td>
                    </tr>
                    <tr>
                        <td>Display SH1106 1.3&quot;</td>
                        <td>(optional)</td>
                        <td>8,10 €</td>
                        <td><a href="https://www.makershop.de/display/oled/oled-1-3-zoll-weiss/" target="_blank">link</a></td>
                        <td><a href="https://www.ebay.de/itm/112331632250" target="_blank">link</a></td>
                    </tr>
                    <tr>
                        <td>ePaper Display</td>
                        <td>(optional) nur ESP32</td>
                        <td>11,99$</td>
                        <td><a href="https://www.waveshare.com/product/displays/e-paper/epaper-3/1.54inch-e-paper-module.htm?___SID=U" target="_blank">link</a></td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>Kondensator 100uF 6.3V</td>
                        <td>(optional)</td>
                        <td>2,89 €</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <th scope="row">Summe (ohne Versand)</th>
                        <td>-</td>
                        <th>11,65 €</th>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </tbody>
            </table>
            <div class="alert alert-primary" role="alert">
                Vom Funkmodul <strong>NRF24L01+</strong> wird nur eines benötigt. Je nach Reichweite / Umgebung kann hier variiert werden.
            </div>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row align-items-center g-5 py-5">
        <div class="col-lg-6">
            <h1 class="display-5 fw-bold lh-1 mb-3">Zusammenbau NRF</h1>
            <p class="lead">
                Diese Anleitung richtet sich an alle, die einen MI- oder HM-Wechselrichter haben. Die neueste Generation benötigt ein anderes Funkmodul, dafür weiter unten weiterlesen.
            </p>
            <p class="lead">
                Für den Zusammenbau wird in der Regel ein Lötkolben benötigt. Es gibt zwei verschiedene Vorgehen, steckbar (mit Dunpont Kabeln) und fest verdrahtet.<br/>
                Es wird die feste Verdrahtung empfohlen, da sie weniger anfällig ist.<br/><br/>
                Für die Stabilität ist es wichtig, einen 100uF (oder größeren) Kondensator an das NRF24 Modul anzubinden, da dieses beim Senden hohe Ströme fordert.<br/>
                Dieser Kondensator sollte möglichst nahe am NRF24 an Pin 1 (sw) und Pin 2 (rt) positioniert werden.
            </p>
            <div class="alert alert-primary" role="alert">
                <strong>Hinweis: </strong>Es kann auch zuerst der ESP geflasht werden, dann hängen noch nicht so viele Kabel dran.
            </div>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <a href="/img/fritzing/AhoyWemos_Steckplatine.jpg" target="_blank"><img src="/img/fritzing/AhoyWemos_Steckplatine.jpg" class="d-block mx-lg-auto img-fluid" alt="schematics" width="450" loading="lazy"></a>
        </div>
    </div>
</div>


<div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row align-items-center g-5 py-5">
        <div class="col-lg-6">
            <h1 class="display-5 fw-bold lh-1 mb-3">Zusammenbau NRF</h1>
            <p class="lead">
                Für die neueste Generation der Wechselrichter wird ein CMT2300A Funkmodul benötigt. Dieses funkt auf 868MHz.
            </p>
            <p class="lead">
                Für den Zusammenbau wird in der Regel ein Lötkolben benötigt. Da das CMT2300A Modul (zB. E49-900M20S) sehr filigrane Pins hat wird eine Platine empfohlen. Starre Kabel werden schon nach kurzer Zeit das Funkmodul zerstören, die einzige Methode es von Hand aufzubauen ist eine Montage auf dem "Rücken liegend" (wie ein Käfer auf dem Rücken) und mit sehr feinen Drähten.
            </p>
            <p class="lead">
                Diese Generation kann nur von einem ESP32 angesprochen werden, beim ESP8266 kann das SPI-Modul (im ESP) nicht in den Modus gebracht werden um korrekt mit dem CMT2300A zu sprechen.
            </p>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <p class="lead">
                Bild folgt
            </p>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <div class="row flex-lg-row align-items-center g-5 py-5">
        <div class="col-lg-6">
            <h1 class="display-5 fw-bold lh-1 mb-3">Firmware flashen</h1>
            <p class="lead">
                Ist die Hardware zusammengebaut / -gesteckt kann über den Web-Installer die Firmware (letztes Release) auf den ESP geladen werden.
            </p>
            <p class="lead" >
                Hierzu die Ahoy-Hardware per USB Kabel an den PC stecken und evtl. warten, bis die Treiber installiert sind. Anschließend auf den <strong>connect</strong> Button klicken.
            </p>
            <div class="alert alert-primary" role="alert">
                <strong>Hinweis: </strong>Der Web Installer kann sowohl für ESP8266 als auch ESP32 verwendet werden.<br/>
                Beim ESP32 ist es notwendig den BOOT-Button gedrückt zu halten während man kurz den EN-Button drückt (um in den Bootloader zu kommen). Danach kann der BOOT-Button wieder losgelassen werden und der Flashvorgang gestartet werden.
            </div>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <esp-web-install-button manifest="/firmware/manifest.json">
                <span slot="unsupported">
                    <div class="alert alert-warning" role="alert">
                        Your browser does not support installing things on ESP devices. Use Google Chrome or Microsoft Edge.
                    </div>
                </span>
                <span slot="not-allowed">
                    <div class="alert alert-danger" role="alert">
                        You are not allowed to do this using http!
                    </div>
                </span>
            </esp-web-install-button>
            <div class="alert alert-secondary mt-3" role="alert">
                Der Online Installer wird von <a href="https://esphome.github.io/esp-web-tools/" target="_blank">ESP Home Web Tools</a> bereitgestellt
            </div>
            <p class="lead">
                Alternativ kann auch die aktuelle Entwicklerversion heruntergeladen werden: <a href="https://nightly.link/lumapu/ahoy/workflows/compile_development/development03/ahoydtu_dev.zip" target="_blank">latest Development Build</a> (das zip enthält auch WebTools um die Version zu installieren)<br/>
                (Die Entwicklerversion kann uU. instabil sein oder Fehler enthalten!)
            </p>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <h1 class="display-5 fw-bold lh-1 mb-2 pt-5">Ahoy Einrichten</h1>
    <div class="row flex-lg-row g-5 pb-5">
        <div class="col-lg-6">
            <h4><span class="badge rounded-pill bg-primary">1</span> Start</h4>
            <p class="lead">
                Nach einer erfolgreichen Installation sollte der Ahoy durch ab- und anstecken neu gestartet werden.<br/>
            </p>
            <p class="lead">
                Der Ahoy spannt automatisch ein WLAN mit dem Namen <strong>AHOY-DTU</strong> auf. Verbinden Sie ein beliebiges WLAN-fähiges Gerät mit diesem WLAN. Nach einer erfolgreichen Verbindung muss im Browser die Adresse <a href="http://192.168.4.1" target="_blank">http://192.168.4.1</a> aufgerufen werden.
            </p>
            <div class="alert alert-primary mt-3" role="alert">
                Das Passwort für das WLAN <strong>AHOY-DTU</strong> ist <strong>esp_8266</strong> (auch bei Installationen auf dem ESP32)
            </div>

            <h4><span class="badge rounded-pill bg-primary mt-5">2</span> Ahoy als WLAN Client einrichten</h4>
            <p class="lead">
                Damit Ahoy von jedem Gerät in Ihrem Netzwerk erreicht werden kann, ist es erforderlich, dass er sich mit dem heimischen WLAN verbindet.
            </p>
            <p class="lead">
                Hierzu muss in die Einstellungen navigiert werden, dies geschieht über den Menüpunkt <a href="http://192.168.4.1/setup" target="_blank">Settings</a>.
            </p>
            <p class="lead">
                In der Rubrik <strong>WiFi</strong> müssen <strong>SSID</strong> und das <strong>WLAN Passwort</strong> eingetragen werden.
            </p>
            <p class="lead">
                Um den Schritt abzuschließen müssen die Einstellungen mit einem Klick auf <strong>save</strong> gespeichert werden.
            </p>
            <p class="lead">
                Durch einen Neustart meldet sich der Ahoy automatisch in dem eingestellten WLAN an.
            </p>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <h4><span class="badge rounded-pill bg-primary">3</span> Ahoy in Netzwerk finden</h4>
            <p class="lead">
                Wurde in den Einstellungen der Defaultwert für den Gerätename nicht verändert kann mit einem <strong>ping AHOY-DTU</strong> die IP-Adresse herausgefunden werden.
            </p>
            <p class="lead">
                Als weitere Möglichkeit bietet sich die Suche im heimische WLAN Router (z.B. Fritz!Box) an.
            </p>
            <p class="lead">
                Die dritte Möglichkeit ist über die Serielle Console (integriert in Web Installer). Während dem Start von Ahoy wird die zugewiesene IP Adresse ausgegeben.
            </p>

            <h4><span class="badge rounded-pill bg-primary mt-5">4</span> Wechselrichter hinzufügen</h4>
            <p class="lead">
                Jeder Wechselrichter hat eine eindeutige Seriennummer. Diese muss in den Einstellungen eingetragen werden. Hierzu wieder die Einstellungen über die zuvor ermittelte IP-Adresse aufrufen.
            </p>
            <p class="lead">
                Die Rubrik <strong>Inverter</strong> öffnen und die 12-stellige Seriennummer eingeben.
            </p>
            <p class="lead">
                Der Name im nächsten Feld ist frei wählbar und dient der späteren Erkennung z.B. über MQTT.
            </p>
            <p class="lead">
                Unter <i>Max Module Power (Wp)</i> wird die maximale Peak-Leistung der Solarmodule pro Eingang des Wechselrichters eingetragen.
            </p>
            <p class="lead">
                Die <i>Modul Namen</i> sind optional, auch diese dienen der späteren Erkennung.
            </p>
            <div class="alert alert-primary mt-3" role="alert">
                Die Seriennummer des Wechselrichters klebt zweifach unten auf dem Wechselrichter.
            </div>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <h1 class="display-5 fw-bold lh-1 mb-2 pt-5">Daten empfangen</h1>
    <div class="row flex-lg-row g-5 pb-5">
        <div class="col-lg-6">
            <p class="lead">
                Der ESP versucht in der Standardeinstellung alle 30 Sekunden Daten vom Wechselrichter abzufragen. Hierzu benötigt er eine gültige Zeit.
            </p>
            <p class="lead">
                Man kann auf der Startseite von Ahoy prüfen, ob die Zeit <i>ESP-Time</i> korrekt ist. Falls nicht kann man über das Setup in der Rubrik <strong>NTP Server</strong> die Zeit neu setzen.
            </p>
            <div class="alert alert-primary mt-3" role="alert">
                <strong>Hinweis: </strong>Ahoy kann den Wechselrichter nur bei Tageslicht erreichen, da dessen Funkmodul ausschließlich von den Solarmodulen versorgt wird.
            </div>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <p class="lead">
                Nach kurzer Zeit werden die ersten Daten von Ahoy empfangen. Hierfür ist die Rubrik <strong>Statistics</strong> auf der Startseite sehr hilfreich.
            </p>
            <p class="lead">
                Der Zähler hinter <i>RX success</i> gibt an, wie viele Pakete erfolgreich empfangen wurden. Um festzustellen, ob der Wechselrichter überhaupt antwortet kann der Zähler hinter <i>Frames received</i> herangezogen werden.
            </p>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <h1 class="display-5 fw-bold lh-1 mb-2 pt-5">Weiterführende Einstellungen</h1>
    <div class="row flex-lg-row g-5 pb-5">
        <div class="col-lg-6">
            <h4>MQTT verbinden</h4>
            <p class="lead">
                Um Ahoy in ein Smarthome (ioBroker, Homeassistant, etc.) einzubinden, bietet sich MQTT als gängige Schnittstelle an. Hierüber werden automatisch die vom Wechselrichter gelesenen Werte an einen sog. MQTT-Broker (z.B. <a href="https://mosquitto.org/" target="_blank"> Mosquitto</a>) gesendet.
            </p>
            <p class="lead">
                Hierzu muss in den Einstellungen in der Rubrik <strong>MQTT</strong> der Broker, dessen Port (Standard ist 1883) und ein (frei wählbares) <i>Topic</i> angegeben werden.
            </p>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <h4>Sonnenauf und -untergang</h4>
            <p class="lead">
                Da der Wechselrichter nur bei Tageslicht Daten sendet, kann optional eine Nachtabschaltung konfiguriert werden. Hierzu sind die Geokoordinaten vom Standort nötig. Sind diese korrekt eingetragen, wird automatisch der lokale Sonnenauf- und untergang berechnet.
            </p>
            <p class="lead">
                Die Koordinaten müssen mit Dezimalpunkt angegeben werden, z.B. <strong>51.1</strong> und <strong>10.2</strong>.
            </p>
        </div>
    </div>
</div>


<div class="b-example-divider"></div>


<div class="container col-xxl-8 px-4 py-5">
    <h1 class="display-5 fw-bold lh-1 mb-2 pt-5">Wie geht es weiter?</h1>
    <div class="row flex-lg-row g-5 pb-5">
        <div class="col-lg-6">
            <h4>Beitragen / Unterstützen</h4>
            <p class="lead">
                Inzwischen besteht die Community von Ahoy schon aus ca. 1000 Leuten, jeder ist herzlich willkommen.
            </p>
            <p class="lead">
                Es gibt verschiedene Themen, welche die Gemeinschaft voranbringen:
                <ul class="lead">
                    <li>Erweiterungen / Verbesserungen am Code</li>
                    <li>Dokumentation der Features</li>
                    <li>Diskussion mit anderen Mitgliedern</li>
                    <li>Testen und Berichten von Fehlern</li>
                    <li>Support von neuen Mitgliedern</li>
                    <li>Entwerfen von Platinen / Gehäusen für Ahoy</li>
                    <li>Spende an die Entwickler</li>
                </ul>
            </p>
        </div>
        <div class="col-10 col-sm-8 col-lg-6">
            <h4>Links</h4>
            <p class="lead">
                <ul class="lead">
                    <li><a href="https://github.com/lumapu/ahoy" target="_blank">Github Repository</a></li>
                    <li><a href="https://discord.gg/WzhxEY62mB" target="_blank">Discord Server</a></li>
                    <li><a href="https://paypal.me/lupusch" target="_blank">Donation</a></li>
                </ul>
            </p>
        </div>
    </div>
</div>
